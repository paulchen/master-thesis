\documentclass[a4paper,11pt,twoside]{memoir}
\chapterstyle{veelo}

\renewcommand*{\printchaptertitle}[1]{%
    \hrule\vskip\onelineskip \raggedleft \chaptitlefont #1}


% TODO before completion: improve graphics by running dia-export.sh

% TODO check: always , before and

% TODO all \cite, \ref: always ~ instead of standard space to avoid line breaking

% TODO all captions: end sentence with a dot (.)

\usepackage{TUINFDA}

\definecolor{linkcolor}{HTML}{000088}

\usepackage{url}
\usepackage[colorlinks=true,linkcolor=linkcolor,urlcolor=linkcolor,citecolor=linkcolor]{hyperref}	% links in pdf
\usepackage{bookmark}
\usepackage{graphicx}            			% Figures
\usepackage{verbatim}            			% Code-Environment
\usepackage[lined,linesnumbered,algochapter]{algorithm2e} % Algorithm-Environment

\usepackage{pgf}					
\usepackage{tikz}					% tikz graphics

\usepackage{comment}
\usepackage{siunitx}
\sisetup{per-mode=symbol}

% TODO remove glossary number lists (with option nonumberlist)?
\usepackage[toc,xindy,numberedsection=autolabel]{glossaries}
\renewcommand{\glsnamefont}[1]{\makefirstuc{#1}} % for making the first word of each glossary term upper case
\renewcommand{\glsseeitemformat}[1]{\Glsentrytext{#1}}
\newcommand{\Egls}[1]{\emph{\Gls{#1}}}
\newcommand{\egls}[1]{\emph{\gls{#1}}}
\newcommand{\eacs}[1]{\emph{\acs{#1}}}
\newcommand{\eacss}[1]{\emph{\acs{#1}s}}
\renewcommand{\glsseelastsep}{\space\emph{and}\space}

\makeglossary

\input{glossary}

\usepackage[english]{babel,varioref}	% Querverweise
\usepackage{bibgerm,cite}       % Deutsche Bezeichnungen, Automatisches Zusammenfassen von Literaturstellen
% to use the german charset include cp850 for MS-DOS, ansinew for Windows and latin1 for Linux.
% \usepackage[latin1]{inputenc}

\usepackage{mdframed}
\usepackage{longtable}
\usepackage{listings}

\usepackage{acronym}
\usepackage{mhchem}

\lstset{frame=trbl,basicstyle=\scriptsize,moredelim=**[is][{\btHL[fill=green!20]}]{@@}{@@},}

\usepackage{xspace}

\thesistitle{A Weather Ontology for Predictive Control in Smart Homes}
%\thesissubtitle{Optional Subtitle} % optional

% TODO
\thesisdate{TT.MM.2013}

% all titles and designations have to be gender-related!
\thesisdegree{Diplom-Ingenieur}{Diplom-Ingenieur}
\thesiscurriculum{Software Engineering \& Internet Computing}{Software Engineering \& Internet Computing} % your study
\thesisverfassung{Verfasser} % Verfasser
\thesisauthor{Paul Staroch} % your name
\thesisauthoraddress{Graf Starhemberg-Gasse 5, 1040 Wien} % your address
\thesismatrikelno{0425426} % your registration number

\thesisbetreins{Ao.Univ.Prof. Dipl.-Ing. Dr.techn. Wolfgang Kastner}
\thesisbetrzwei{Dipl.-Ing. Mario Kofler}

% define page numbering styles
\makepagestyle{numberCorner}
\makeevenhead{numberCorner}{\thepage}{}{\leftmark}
\makeoddhead{numberCorner}{\rightmark}{}{\thepage}
\makeevenfoot{numberCorner}{}{}{}
\makeoddfoot{numberCorner}{}{}{}

% define custom macros for specific formats or names
\newcommand{\uml}[1]{\texttt{#1}}
\newcommand{\cd}{\textsf{Class Diagram}}

\newcommand{\thinkhome}{\emph{ThinkHome}\xspace}
\newcommand{\smarthome}{\emph{Smart Home}\xspace}
\newcommand{\smarthomes}{\emph{Smart Homes}\xspace}
\newcommand{\thinkhomeweather}{\emph{ThinkHomeWeather}\xspace}
\newcommand{\methontology}{\emph{METHONTOLOGY}\xspace}
\newcommand{\protege}{\emph{Prot\'{e}g\'{e}}\xspace}
\newcommand{\yrno}{\emph{yr.no}\xspace}
\newcommand{\chapterquotation}[2]{\hfill\parbox{0.5\textwidth}{\raggedleft\noindent\textit{#1}\\--\enskip #2}}
\newcommand{\muo}{\eacs{MUO}\xspace}


\makeatletter
\newenvironment{btHighlight}[1][]
{\begingroup\tikzset{bt@Highlight@par/.style={#1}}\begin{lrbox}{\@tempboxa}}
{\end{lrbox}\bt@HL@box[bt@Highlight@par]{\@tempboxa}\endgroup}

\newcommand\btHL[1][]{%
  \begin{btHighlight}[#1]\bgroup\aftergroup\bt@HL@endenv%
}
\def\bt@HL@endenv{%
  \end{btHighlight}%   
  \egroup
}
\newcommand{\bt@HL@box}[2][]{%
  \tikz[#1]{%
    \pgfpathrectangle{\pgfpoint{1pt}{0pt}}{\pgfpoint{\wd #2}{\ht #2}}%
    \pgfusepath{use as bounding box}%
    \node[anchor=base west, fill=orange!30,outer sep=0pt,inner xsep=1pt, inner ysep=0pt, rounded corners=0pt, minimum height=\ht\strutbox+1pt,#1]{\raisebox{1pt}{\strut}\strut\usebox{#2}};
  }%
}
\makeatother

\setcounter{maxsecnumdepth}{2}

\begin{document}

\captionnamefont{\bfseries}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   FRONTMATTER    %%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\frontmatter
\pagenumbering{roman}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   TITLEPAGES    %%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% the german title page is required as first page
\include{titlepage}

% an english translation may follow
\include{titlepage_en} % optional

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   ERKLAERUNG DER SELBSTAENDIGKEIT   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\cleardoublepage
\selectlanguage{ngerman}
\input{chapters/erklaerung}
\selectlanguage{english}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   ACKNOWLEDGEMENTS    %%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% optional acknowledgements may be included in german or in english
%\input{chapters/danksagung} 		% optional
\input{chapters/acknowledgements}	% optional

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   ABSTARCT    %%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{chapters/abstract_en}
\cleardoublepage
\selectlanguage{ngerman}
\input{chapters/abstract_de}
\selectlanguage{english}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   CONTENTS    %%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% uncomment to set document language to german (results in "Inhaltsverzeichnis", "Kapitel", "Abbildung", etc. instead of "Contents", "Chapter", and "Figure"), otherwise the document's language is english
%\selectlanguage{ngerman}

\setcounter{tocdepth}{3}

\cleardoublepage
\pagestyle{numberCorner}
\tableofcontents*

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   MAINMATTER    %%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\mainmatter
\pagenumbering{arabic}
\pagestyle{numberCorner}

\input{chapters/introduction}

\input{chapters/existing_work}

\input{chapters/weather_data}

\input{chapters/development_approaches}

\input{chapters/thinkhomeweather_ontology}

\input{chapters/weather_importer}

\input{chapters/conclusion}

% TODO get rid of "etc."
% TODO "Internet" always upper-case

% TODO normal pressure, normal humidity etc. -> average pressure, average humidity

% TODO remove unused files in directory 'chapters' and 'figures' from SVN repository

% TODO consistent use of \emph{}

% TODO quotes at the beginning of each chapter

% TODO sun radiation -> solar radiation

% TODO hasNextWeatherState?

% TODO NoRain: describe why probability == 0 has been omitted

% TODO WeatherPhenomenon: describe why no "hasWeatherPhenomenon max 1 CloudCover" etc.
% TODO WeatherPhenomenon: describe why no "hasWeatherPhenomenon some WeatherPhenomenon" etc.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% BACKMATTER %%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\appendix

\input{chapters/appendix_listings}

% TODO remove
\glsaddall
\glossarystyle{altlisthypergroup}
\printglossaries

\input{acronyms}

\cleardoublepage
% TODO captions?
\listoffigures

\cleardoublepage
% TODO captions?
\listoftables

\bibliographystyle{unsrt}
\bibliography{references}

\end{document}
