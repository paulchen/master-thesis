\documentclass[a4paper,11pt,twoside]{memoir}
\chapterstyle{veelo}

\renewcommand*{\printchaptertitle}[1]{%
    \hrule\vskip\onelineskip \raggedleft \chaptitlefont #1}


% TODO check: always place a comma before 'and' and 'or'

% TODO all captions: end sentence with a dot (.)

% TODO http://en.wikibooks.org/wiki/LaTeX/Tips_and_Tricks#id_est_and_exempli_gratia_.28i.e._and_e.g..29

% TODO use/usage

% TODO all tables in table environments instead of figure environments

\usepackage{TUINFDA}

\definecolor{linkcolor}{HTML}{000088}

\usepackage{url}
\usepackage{bookmark}
\usepackage{graphicx}            			% Figures
\usepackage{verbatim}            			% Code-Environment
\usepackage[lined,linesnumbered,algochapter]{algorithm2e} % Algorithm-Environment

\usepackage{pgf}					
\usepackage{tikz}					% tikz graphics

\usepackage{comment}
\usepackage{siunitx} % TODO write all numbers using this package?
\sisetup{per-mode=symbol}

\usepackage[toc,xindy,numberedsection=autolabel]{glossaries}
\renewcommand{\glsseeitemformat}[1]{\glsentrytext{#1}}
\renewcommand*{\glsseeformat}[3][\seename]{\emph{#1} \glsseelist{#2}.}
\newcommand{\Egls}[1]{\emph{\Gls{#1}}}
\newcommand{\egls}[1]{\emph{\gls{#1}}}
\newcommand{\eacs}[1]{\emph{\acs{#1}}}
\newcommand{\eacss}[1]{\emph{\acs{#1}s}}
\newcommand{\acss}[1]{\acs{#1}s}
\renewcommand{\glsseelastsep}{,\space}

\makeglossary

\input{glossary}

\usepackage[english]{babel,varioref}	% Querverweise
\usepackage{bibgerm,cite}       % Deutsche Bezeichnungen, Automatisches Zusammenfassen von Literaturstellen
% to use the german charset include cp850 for MS-DOS, ansinew for Windows and latin1 for Linux.
% \usepackage[latin1]{inputenc}

\usepackage{mdframed}
\usepackage{longtable}
\usepackage{listings} % TODO remove

\usepackage{newfloat}
\DeclareFloatingEnvironment[name=Listing,listname={List of Listings}]{mintlisting}

\usepackage{acronym}
\usepackage[version=3]{mhchem}

\usepackage{ucs}

\usepackage[scaled]{beramono}

\usepackage{minted}
\usemintedstyle{manni}
\fvset{fontsize=\scriptsize}

\definecolor{listingBottom}{cmyk}{.1,.1,.1,.1}

\definecolor{gray}{rgb}{0.4,0.4,0.4}
\definecolor{darkblue}{rgb}{0.0,0.0,0.6}
\definecolor{cyan}{rgb}{0.0,0.6,0.6}
\definecolor{stringColor}{rgb}{.5,0,0}
\definecolor{contentColor}{rgb}{0,0,0}

\lstdefinelanguage{XML}
{
  alsoletter={\:},
  basicstyle=\ttfamily\color{contentColor}\scriptsize,
  morestring=[b]",
  emph={<,>,/>},
  emphstyle=\color{darkblue},
  emph={[2]xmlns\:},
  emphstyle={[2]\bfseries\color{cyan}},
  morecomment=[s]{<?}{?>},
  stringstyle=\color{stringColor},
  identifierstyle=\color{darkblue},
  keywordstyle=\bfseries\color{cyan},
  morekeywords={rdf:,geo:,weather}% list your attributes here
}
\newcommand{\resetlisting}[0]{\lstset{
      frame=trbl,
      basicstyle=\scriptsize\ttfamily,
      moredelim=**[is][{\btHL[fill=green!20]}]{@@}{@@},
      extendedchars=\true,inputencoding=utf8x
}}
\newcommand{\turtlelisting}[0]{\lstset{ % TODO
      frame=none,
      basicstyle=\scriptsize\ttfamily
}}
\newcommand{\xmllisting}[0]{\lstset{
      frame=none,
      basicstyle=\scriptsize\ttfamily,
      language=XML
}}

\usepackage{xspace}

\usepackage{threeparttable,booktabs}

\usepackage{multirow}

% load this package last to avoid any problems with other package
\usepackage{hyperref}	% links in pdf
\hypersetup{colorlinks=true,linkcolor=linkcolor,urlcolor=linkcolor,citecolor=linkcolor}

\thesistitle{A Weather Ontology for Predictive Control in Smart Homes}
%\thesissubtitle{Optional Subtitle} % optional

% TODO
\thesisdate{29.08.2013}

% all titles and designations have to be gender-related!
\thesisdegree{Diplom-Ingenieur}{Diplom-Ingenieur}
\thesiscurriculum{Software Engineering \& Internet Computing}{Software Engineering \& Internet Computing} % your study
\thesisverfassung{Verfasser} % Verfasser
\thesisauthor{Paul Staroch} % your name
\thesisauthoraddress{Graf Starhemberg-Gasse 5, 1040 Wien} % your address
\thesismatrikelno{0425426} % your registration number

\thesisbetreins{Ao.Univ.Prof. Dipl.-Ing. Dr.techn. Wolfgang Kastner}
\thesisbetrzwei{Dipl.-Ing. Mario Kofler}

% define page numbering styles
\makepagestyle{numberCorner}
\makeevenhead{numberCorner}{\thepage}{}{\leftmark}
\makeoddhead{numberCorner}{\rightmark}{}{\thepage}
\makeevenfoot{numberCorner}{}{}{}
\makeoddfoot{numberCorner}{}{}{}

% define custom macros for specific formats or names
\newcommand{\uml}[1]{\texttt{#1}}
\newcommand{\cd}{\textsf{Class Diagram}}

\newcommand{\thinkhome}{\emph{ThinkHome}\xspace}
\newcommand{\smarthomeweather}{\emph{SmartHomeWeather}\xspace}
\newcommand{\methontology}{\emph{METHONTOLOGY}\xspace}
\newcommand{\protege}{\emph{Prot\'{e}g\'{e}}\xspace}
\newcommand{\yrno}{\emph{yr.no}\xspace}
\newcommand{\chapterquotation}[2]{\hfill\parbox{0.5\textwidth}{\raggedleft\noindent\textit{#1}\\--\enskip #2}}
\newcommand{\muo}{\eacs{MUO}\xspace}

\newcommand{\treg}{\textsuperscript{\textregistered}}
\newcommand{\ttra}{\textsuperscript{\texttrademark}}

\makeatletter
\newenvironment{btHighlight}[1][]
{\begingroup\tikzset{bt@Highlight@par/.style={#1}}\begin{lrbox}{\@tempboxa}}
{\end{lrbox}\bt@HL@box[bt@Highlight@par]{\@tempboxa}\endgroup}

\newcommand\btHL[1][]{%
  \begin{btHighlight}[#1]\bgroup\aftergroup\bt@HL@endenv%
}
\def\bt@HL@endenv{%
  \end{btHighlight}%   
  \egroup
}
\newcommand{\bt@HL@box}[2][]{%
  \tikz[#1]{%
    \pgfpathrectangle{\pgfpoint{1pt}{0pt}}{\pgfpoint{\wd #2}{\ht #2}}%
    \pgfusepath{use as bounding box}%
    \node[anchor=base west, fill=orange!30,outer sep=0pt,inner xsep=1pt, inner ysep=0pt, rounded corners=0pt, minimum height=\ht\strutbox+1pt,#1]{\raisebox{1pt}{\strut}\strut\usebox{#2}};
  }%
}
\makeatother

\setcounter{maxsecnumdepth}{2}

\setlength\partopsep{-\topsep}

\PrerenderUnicode{⇒}
\PrerenderUnicode{∧}

% Add line between figure and text
\makeatletter
\def\topfigrule{\kern3\p@ \hrule \kern -3.4\p@} % the \hrule is .4pt high
\def\botfigrule{\kern-3\p@ \hrule \kern 2.6\p@} % the \hrule is .4pt high
\def\dblfigrule{\kern3\p@ \hrule \kern -3.4\p@} % the \hrule is .4pt high
\makeatother

% At least 80% of every float page must be taken up by
% floats; there will be no page with more than 20% white space.
\def\topfraction{.8}
\def\dbltopfraction{\topfraction}
\def\floatpagefraction{\topfraction}     % default .5
\def\dblfloatpagefraction{\topfraction}  % default .5
\def\textfraction{.2}

\begin{document}

\captionnamefont{\bfseries}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   FRONTMATTER    %%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\frontmatter
\pagenumbering{roman}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   TITLEPAGES    %%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% the german title page is required as first page
\include{titlepage}

% an english translation may follow
\include{titlepage_en} % optional

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   ERKLAERUNG DER SELBSTAENDIGKEIT   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\cleardoublepage
\selectlanguage{ngerman}
\input{chapters/erklaerung}
\selectlanguage{english}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   ACKNOWLEDGEMENTS    %%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% optional acknowledgements may be included in german or in english
%\input{chapters/danksagung} 		% optional
\input{chapters/acknowledgements}	% optional

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   ABSTARCT    %%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{chapters/abstract_en}
\cleardoublepage
\selectlanguage{ngerman}
\input{chapters/abstract_de}
\selectlanguage{english}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   CONTENTS    %%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% uncomment to set document language to german (results in "Inhaltsverzeichnis", "Kapitel", "Abbildung", etc. instead of "Contents", "Chapter", and "Figure"), otherwise the document's language is english
%\selectlanguage{ngerman}

\setcounter{tocdepth}{3}

\cleardoublepage
\pagestyle{numberCorner}
\tableofcontents*

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%   MAINMATTER    %%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\mainmatter
\pagenumbering{arabic}
\pagestyle{numberCorner}

\input{chapters/introduction}

\input{chapters/existing_work}

\input{chapters/weather_data}

\input{chapters/development_approaches}

\input{chapters/smarthomeweather_ontology}

\input{chapters/weather_importer}

\input{chapters/conclusion}

% TODO consistent use of \emph{}

% TODO quotes at the beginning of each chapter

% TODO NoRain: describe why probability == 0 has been omitted

% TODO WeatherPhenomenon: describe why no "hasWeatherPhenomenon max 1 CloudCover" etc.
% TODO WeatherPhenomenon: describe why no "hasWeatherPhenomenon some WeatherPhenomenon" etc.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% BACKMATTER %%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\appendix

\input{chapters/appendix_listings}

\glossarystyle{altlisthypergroup}
\printglossaries

\input{acronyms}

\cleardoublepage
% TODO captions?
\listoffigures

\cleardoublepage
% TODO captions?
\listoftables

\cleardoublepage
\listofmintlistings

\bibliographystyle{thesis}
\bibliography{references}

\end{document}
